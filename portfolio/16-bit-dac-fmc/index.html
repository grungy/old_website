<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>16 Bit DAC FMC Card - Josh Marks</title>
<meta name="description" content="Design of a 16 Bit DAC FMC Card.">


  <meta name="author" content="Josh Marks">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Josh Marks">
<meta property="og:title" content="16 Bit DAC FMC Card">
<meta property="og:url" content="http://localhost:4000/portfolio/16-bit-dac-fmc/">


  <meta property="og:description" content="Design of a 16 Bit DAC FMC Card.">



  <meta property="og:image" content="http://localhost:4000/assets/images/16-bit-dac/dac_image.png">



  <meta name="twitter:site" content="@grngy">
  <meta name="twitter:title" content="16 Bit DAC FMC Card">
  <meta name="twitter:description" content="Design of a 16 Bit DAC FMC Card.">
  <meta name="twitter:url" content="http://localhost:4000/portfolio/16-bit-dac-fmc/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="http://localhost:4000/assets/images/16-bit-dac/dac_image.png">
    
  

  



  <meta property="article:published_time" content="2020-08-01T18:23:02-04:00">





  

  


<link rel="canonical" href="http://localhost:4000/portfolio/16-bit-dac-fmc/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Josh Marks",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Josh Marks Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/blob.png" alt=""></a>
        
        <a class="site-title" href="/">
          Josh "grungy" Marks
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/portfolio/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Gallery</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/contact/">Contact</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
        <img src="http://placehold.it/350x250"
             alt="logo">
      
      <h3>Role</h3>
      <p>Electrical Engineer</p>

      
    
      
      <h3>Responsibilities</h3>
      <p>Determine why current design doesn’t work.</p>

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="16 Bit DAC FMC Card">
    <meta itemprop="description" content="Design of a 16 Bit DAC FMC Card.">
    <meta itemprop="datePublished" content="2020-08-01T18:23:02-04:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">16 Bit DAC FMC Card
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        
<figure>
  
<img src="/assets/images/16-bit-dac/irled_micro_display_overview.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<p>We required a higher resolution and faster Digital-toAnalog Converter (DAC) for our IRLED micro-display screen. The DAC in this program is responsible for setting the brightness of the IRLED pixel. A little overview diagram of the IRLED micro-display system would help understand the architecture. Below is a block diagram of the different components.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/irled_micro_display_overview.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<p>The information input for the system starts on the left of this diagram. Input video data comes in and is pre-distorted to account for individual pixel non-uniformity. We call this a Non-uniformity or NUC. The NUC’ed video is sent onto the Close Support Electronics (CSE). The CSE contains an FPGA that is responsible for converting the input video data format into the frame format used to draw imagery with CMOS ASIC. Out of the FPGA comes digital address signals and digital brightness values for each pixel. The job of the DAC board is to convert the 16 bit digital numbers from the FPGA into analog voltages. The analog voltages are then amplified using a several stage amplifier chain to the correct voltages for the ASIC.</p>

<p>Due to the high frame rates (400Hz to 1KHz), and high pixel resolution (512×512 to 2048×2048) required by the application of the IRLED micro-display the DAC must settle to the new value quickly. Commercially available high end DAC systems are typically setup for Radio Frequency (RF) applications because that is typically the use case for these devices. For our purposes we required time domain operation and preservation of DC information. This ultimately required an in-house design of a new DAC board. A picture of the end product of this in-house design effort is shown below.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/dac_image.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<p>At the top is a silkscreen rectangle that outlines the FMC connector. The FMC connector is used to attach this PCB to the FPGA board. FMC is convenient because it is a high density connector that maintains good signal integrity. Moving to the right is a sea of passive components that are supporting the two DACs on the other side of the card, terminating signal lines, and providing capacitance to power supplies.</p>

<p>The micro controller is the first IC visible on the board when moving from the FMC connector to the right. The micro controller is responsible for programming the DAC when testing the board without the FPGA, monitoring voltage levels of power supply lines, operating the feedback Analog to Digital Converter (ADC) for tuning in DAC parameters and setting LED light displays.</p>

<p>Moving to the right past the micro controller are the LED lights and the crystal for the micro controller. There are also two headers. One is a 100 mil pitch header and the other is a right angle header. The 100 mil pitch header is used to connect the DAC output to an amplifier card PCB, and the right angle header has several test signals routed to it for ease of troubleshooting.</p>

<h3 id="major-components">Major Components</h3>
<p>Digital to Analog Converters
The DACs used in this project are the <a href="https://www.analog.com/media/en/technical-documentation/data-sheets/ad9743_9745_9746_9747.pdf">AD9747s</a> from Analog Devices. These DACs were chosen because they support 16 bits and fast enough sample rate (250 MSPS) for the application. A block diagram of the AD9747 is shown below. In each AD9747 part there are two DACs.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/ad9747_block_diagram.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<h3 id="microcontroller">Microcontroller</h3>

<p>The micro controller used in this project is a 16 bit PIC24. This micro controller was chosen because other in-house projects use this micro controller. This alleviated the need to maintain two tool chain and build environments for development work. If we were a larger organization I probably would have chosen a different micro controller. The PIC24HJ256GP210A- version of the micro controller was used in this project. The pinout for this micro controller is shown below.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/dac_board_micro.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<h2 id="schematic">Schematic</h2>

<h3 id="digital-to-analog-converter">Digital to Analog Converter</h3>

<p>The schematic for both DACs are shown below. The data signals from the FPGA come in from the left and are shown as a large bus that looks like the wires are shorted together. On the right are the two outputs from the DACs. The DACs have gain and offset adjustment secondary DACs to improve the performance of the main DACs. The resistor networks on the right are used to properly connect these adjustment DACs to the main DACs.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/dac_schematic.png" alt="Alt" />

  <figcaption></figcaption>
</figure>

<h2 id="micro-controller">Micro-Controller</h2>

<p>The schematic for the micro-controller is shown below. The micro-controller has an SPI connection to the FPGA in order to control the micro-controller and pass it new configuration parameters for the DACs. As well as any other required general communications. On the right the micro-controller is connected to the output LEDs for signaling board status and events.</p>

<figure>
  
<img src="/assets/images/16-bit-dac/dac_board_micro.png" alt="Alt" />

  <figcaption></figcaption>
</figure>


        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-08-01T18:23:02-04:00">August 1, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=grngy&text=16+Bit+DAC+FMC+Card%20http%3A%2F%2Flocalhost%3A4000%2Fportfolio%2F16-bit-dac-fmc%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fportfolio%2F16-bit-dac-fmc%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fportfolio%2F16-bit-dac-fmc%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="/portfolio/cmos-ic-yield-analysis/" class="pagination--pager" title="CMOS IC Yield Analysis
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/Grngy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/grungy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Josh Marks. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </body>
</html>
